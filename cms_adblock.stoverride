# 功能：在 QX 中攔截 HLS 廣告流（.m3u8）
# 用法：導入 snippet 模組，可嵌入到主配置中
# 注意：需搭配 Rewrite 和 Script 模組啟用
# 腳本支援：cmsAdblock.js
# 1.	📦 Stash 去广告规则（.stoverride）Stash=Modules → Override將 .stoverride 作為模組載入
# https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Stash/cms_adblock.stoverride
# 2.	🌕 Loon 去广告插件（.plugin）Loon插件中心使用 .plugin 插件導入
# https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Loon/cmsAdblock.plugin
# 3.	🌌 Quantumult X 去广告片段（.snippet）Quantumult X配置文件中 snippet在 [rewrite_local] 引入片段或直接粘貼內容到复写
# https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/quantumult-x/cms_adblock.js
name: 去廣告｜CMS
desc: 去除插入式廣告 - 多來源支持
# icon: https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/XPTV.png
# author: Yswag + Fromboy
# Stash 去广告配置
# 名称: 去廣告｜CMS
# 描述: 去除插入式廣告
# 图标: https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/XPTV.png
# 致谢: https://github.com/Yswag
# 注意: Stash 不支持弹窗通知选择（原 Loon 的 #!select=彈窗通知,true,false），如需通知需在脚本中实现

http:
  mitm:
    - m3u8.heimuertv.com
    - m3u8.hmrvideo.com
    - v.cdnlz*.com
    - v.lzcdn*.com
    - vip*.lz-cdn*.com
    - vip.lzcdn*.com
    - "*.ffzy*.com"
    - "*.rrcdnbf*.com"
    - vip.kuaikan*.com
    - bfikuncdn.com
    - play.modujx*.com
    - vod.lyhuicheng.com
    - ukzy.ukubf*.com
    - "*.wgslsw.com"
    - askzycdn.com
    - t0.97img.com
    - "*.bfbfhao.com"
    - player.cl9987.com:188
    - v.ykv3.com
    - "*.3sybf.com"
    - bfnxxcdn.com
    - player.huangguam3u.com
    - leshiyuncdn.36s.top
    - cs1.feidaozy.com

  script:
    - name: 去廣告CMS
      type: response
      match: ^https?:\/\/(m3u8\.(hmrvideo|heimuertv)\.com\/play\/|(v\.lzcdn|v\.cdnlz|vip.*\.lz[-]?cdn)\d+\.com\/.+\/hls\/|(super|svipsvip|vip)\.ffzy[A-Za-z0-9-]+\.com\/.+\/hls\/|c\d+\.rrcdnbf\d+\.com\/video\/|vip\.kuaikan-(cdn|play)\d+\.com\/.+\/hls\/|bfikuncdn\.com\/.+\/hls\/|play\.modujx\d+\.com\/.+\/hls\/|vod\.lyhuicheng\.com\/.+\/hls\/|ukzy\.ukubf\d+\.com\/.+\/hls\/|.*\.wgslsw\.com\/|leshiyuncdn\.36s\.top\/|.*\.feidaozy\.com\/.+\/hls\/|askzycdn\.com\/.+\/hls\/|.*\.97img\.com\/|.*\.bfbfhao\.com\/.+\/hls\/|player\.cl9987\.com:188\/.+\/hls\/|v\.ykv3\.com\/.+\/hls\/|.*\.3sybf\.com\/.+\/hls\/|bfnxxcdn\.com\/.+\/hls\/|player\.huangguam3u\.com\/.+\/hls\/).+\.m3u8
      script-provider: 去廣告CMS
      requires-body: true
      timeout: 10

script-providers:
  去廣告CMS:
    url: https://raw.githubusercontent.com/Fromboy/JavaScript/refs/heads/Scripts/cmsAdblock.js
    interval: 86400
