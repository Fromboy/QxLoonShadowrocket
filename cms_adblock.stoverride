# åŠŸèƒ½ï¼šåœ¨ QX ä¸­æ””æˆª HLS å»£å‘Šæµï¼ˆ.m3u8ï¼‰
# ç”¨æ³•ï¼šå°å…¥ snippet æ¨¡çµ„ï¼Œå¯åµŒå…¥åˆ°ä¸»é…ç½®ä¸­
# æ³¨æ„ï¼šéœ€æ­é… Rewrite å’Œ Script æ¨¡çµ„å•Ÿç”¨
# è…³æœ¬æ”¯æ´ï¼šcmsAdblock.js
# 1.	ğŸ“¦ Stash å»å¹¿å‘Šè§„åˆ™ï¼ˆ.stoverrideï¼‰Stash=Modules â†’ Overrideå°‡ .stoverride ä½œç‚ºæ¨¡çµ„è¼‰å…¥
# https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Stash/cms_adblock.stoverride
# 2.	ğŸŒ• Loon å»å¹¿å‘Šæ’ä»¶ï¼ˆ.pluginï¼‰Loonæ’ä»¶ä¸­å¿ƒä½¿ç”¨ .plugin æ’ä»¶å°å…¥
# https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Loon/cmsAdblock.plugin
# 3.	ğŸŒŒ Quantumult X å»å¹¿å‘Šç‰‡æ®µï¼ˆ.snippetï¼‰Quantumult Xé…ç½®æ–‡ä»¶ä¸­ snippetåœ¨ [rewrite_local] å¼•å…¥ç‰‡æ®µæˆ–ç›´æ¥ç²˜è²¼å…§å®¹åˆ°å¤å†™
# https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/quantumult-x/cms_adblock.js
name: å»å»£å‘Šï½œCMS
desc: å»é™¤æ’å…¥å¼å»£å‘Š - å¤šä¾†æºæ”¯æŒ
# icon: https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/XPTV.png
# author: Yswag + Fromboy
# Stash å»å¹¿å‘Šé…ç½®
# åç§°: å»å»£å‘Šï½œCMS
# æè¿°: å»é™¤æ’å…¥å¼å»£å‘Š
# å›¾æ ‡: https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/XPTV.png
# è‡´è°¢: https://github.com/Yswag
# æ³¨æ„: Stash ä¸æ”¯æŒå¼¹çª—é€šçŸ¥é€‰æ‹©ï¼ˆåŸ Loon çš„ #!select=å½ˆçª—é€šçŸ¥,true,falseï¼‰ï¼Œå¦‚éœ€é€šçŸ¥éœ€åœ¨è„šæœ¬ä¸­å®ç°

# Stash å¤å†™é…ç½®ï¼ˆ.stoverrideï¼‰
# åç§°: å»å»£å‘Šï½œCMS
# æè¿°: å»é™¤æ’å…¥å¼å»£å‘Š
# å›¾æ ‡: https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/XPTV.png
# è‡´è°¢: https://github.com/Yswag
# æ³¨æ„: Stash ä¸æ”¯æŒ Loon çš„ #!select=å½ˆçª—é€šçŸ¥,true,falseï¼Œå¦‚éœ€é€šçŸ¥éœ€åœ¨è„šæœ¬ä¸­å®ç°

rules:
  # æš´é£è·‘é©¬ç¯ï¼šé‡å†™ URLï¼Œç§»é™¤ _z5q.ts å¹¶è¿›è¡Œ 302 é‡å®šå‘
  - REDIRECT,^https?:\/\/s\d+\.bfengbf\.com\/video(.+)_z5q\.ts,$1$2.ts,302

http:
  mitm:
    # éœ€è¦æ‹¦æˆªçš„åŸŸååˆ—è¡¨ï¼Œç”¨äº MITM å¤„ç†
    - m3u8.heimuertv.com
    - m3u8.hmrvideo.com
    - v.cdnlz*.com
    - v.lzcdn*.com
    - vip*.lz-cdn*.com
    - vip.lzcdn*.com
    - "*.ffzy*.com"
    - "*.rrcdnbf*.com"
    - vip.kuaikan*.com
    - bfikuncdn.com
    - play.modujx*.com
    - vod.lyhuicheng.com
    - ukzy.ukubf*.com
    - "*.wgslsw.com"
    - askzycdn.com
    - t0.97img.com
    - "*.bfbfhao.com"
    - player.cl9987.com:188
    - v.ykv3.com
    - "*.3sybf.com"
    - bfnxxcdn.com
    - player.huangguam3u.com
    - leshiyuncdn.36s.top
    - cs1.feidaozy.com

  script:
    # å»å¹¿å‘Šè„šæœ¬è§„åˆ™ï¼Œåº”ç”¨ cmsAdblock.js å¤„ç† m3u8 å“åº”
    - name: CMS.Adblock.heimuertv
      type: http-response
      match: ^https?:\/\/m3u8\.(hmrvideo|heimuertv)\.com\/play\/(.+)\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.lzcdn
      type: http-response
      match: ^https?:\/\/((?:v\.lzcdn|v\.cdnlz|vip.*\.lz[-]?cdn)\d+\.com)\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.ffzy
      type: http-response
      match: ^https?:\/\/(super|svipsvip|vip)\.ffzy[A-Za-z0-9-]+\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.rrcdnbf
      type: http-response
      match: ^https?:\/\/c\d+\.rrcdnbf\d+\.com\/video\/(.+)\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.kuaikan
      type: http-response
      match: ^https?:\/\/vip\.kuaikan-(cdn|play)\d+\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.ikun
      type: http-response
      match: ^https:\/\/bfikuncdn\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.modujx
      type: http-response
      match: ^https:\/\/play\.modujx\d+\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.lyhuicheng
      type: http-response
      match: ^https:\/\/vod\.lyhuicheng\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.ukubf
      type: http-response
      match: ^https:\/\/ukzy\.ukubf\d+\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.wgslsw
      type: http-response
      match: ^https:\/\/.+\.wgslsw\.com\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.leshiyuncdn
      type: http-response
      match: ^https:\/\/leshiyuncdn\.36s\.top\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.feidaozy
      type: http-response
      match: ^https:\/\/.+\.feidaozy\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.askzycdn
      type: http-response
      match: ^https:\/\/askzycdn\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.97img
      type: http-response
      match: ^https:\/\/.+\.97img\.com\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.bfbfhao
      type: http-response
      match: ^https:\/\/.+\.bfbfhao\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.cl9987
      type: http-response
      match: ^https:\/\/player\.cl9987\.com:188\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.ykv3
      type: http-response
      match: ^https:\/\/v\.ykv3\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.3sybf
      type: http-response
      match: ^https:\/\/.+\.3sybf\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.bfnxxcdn
      type: http-response
      match: ^https:\/\/bfnxxcdn\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

    - name: CMS.Adblock.huangguam3u
      type: http-response
      match: ^https:\/\/player\.huangguam3u\.com\/.+\/hls\/.+\.m3u8
      script-provider: CMS.Adblock
      requires-body: true
      timeout: 30

script-providers:
  CMS.Adblock:
    url: https://raw.githubusercontent.com/Fromboy/JavaScript/refs/heads/Scripts/cmsAdblock.js
    interval: 86400
