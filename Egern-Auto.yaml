# å®˜æ–¹æ–‡æ¡£ï¼šhttps://doc.egernapp.com
# Author: https://github.com/Repcz
# TG: https://t.me/QVQ_Channel
# æœ€åæ›´æ–°æ—¶é—´: 2025-09-11
# Egern Version â‰¥ v2.0.0(552)
# Egern ç®€æ´é…ç½®ï¼Œåªæœ‰å›½å†…ğŸ‡¨ğŸ‡³å’Œä»£ç†ğŸŒ 
# åˆ†æµåº“ = https://github.com/Repcz/Tool/tree/X/Egern/Rules
# åœ¨æ‰‹åŠ¨ç­–ç•¥ã€Šã€ˆ æ·»åŠ URLå“ªé‡Œå¡«å†™è‡ªå·±çš„è®¢é˜… ã€‰ã€‹å“ªé‡Œâœï¸è‡ªå·±çš„æœºåœºè®¢é˜…åœ°å€å¼€å§‹æ„‰å¿«çš„å†²æµªå§
# Egern url = https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Egern/Egern.yaml
# Egernsmall url = https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Egern/Egernsmall.yaml
# Egern Lite url = https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Egern/EgernLite.yaml
# Egern- Auto url = https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Egern/Egern-Auto.yaml
# ================================

# IPV6 é»˜è®¤å…³é—­
ipv6: false
# TUNæ¨¡å¼
vif_only: true
# åŠ«æŒ DNS æœåŠ¡å™¨
hijack_dns:
- '*:53'
# httpä»£ç†ç«¯å£
http_port: 3080
# socks5ä»£ç†ç«¯å£
socks_port: 3090
allow_external_connections: true
# éšè—VPNå›¾æ ‡é»˜è®¤å…³é—­
hide_vpn_icon: false
# è‡ªå®šä¹‰ MaxMind æ•°æ®åº“
geoip_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# è‡ªå®šä¹‰ ASN æ•°æ®åº“
asn_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/GeoLite2-ASN.mmdb
# ä»£ç†å»¶è¿Ÿæµ‹è¯•
proxy_latency_test_url: http://1.1.1.1/generate_204
# ç›´è¿å»¶è¿Ÿæµ‹è¯•
direct_latency_test_url: http://connectivitycheck.platform.hicloud.com/generate_204
# è·¯ç”±é…ç½®
compat_route: false
include_all_networks: false
include_apns: false
include_cellular_services: false
include_local_networks: false
#DNSé…ç½®
dns:
  # DNS å¼•å¯¼å™¨ï¼šç”¨äºè§£æä¸Šæ¸¸DNS(DoTã€DoHã€DoQ)ï¼Œé»˜è®¤ system
  bootstrap:
  - system
  upstreams:
    # å›½å†…å…¬å…± DNS
    Domestic-DNS:
    - 223.5.5.5
    - 180.184.1.1
    - 119.29.29.29
    Domestic:
    - quic://dns.alidns.com:853
    - https://doh.pub/dns-query
    Foreign:
    - https://dns.google/dns-query
 # DNS è½¬å‘è§„åˆ™
  forward:
  - wildcard: # é€šé…ç¬¦è§„åˆ™
      match: '*'
      value: Domestic-DNS
  hosts:
    # App Store ä¸‹è½½è¯·æ±‚è§£æ é‡‘å±±CDN
    iosapps.itunes.apple.com:
    - iosapps.itunes.apple.com.download.ks-cdn.com
    dns.alidns.com: 223.5.5.5, 223.6.6.6, 2400:3200:baba::1, 2400:3200::1
    doh.pub: 1.12.12.12, 120.53.53.53
    dns.google: 8.8.8.8, 8.8.4.4, 2001:4860:4860::8888, 2001:4860:4860::8844

    # äº’è”ç½‘IPæŸ¥è¯¢
    public_ip_lookup_url: https://ifconfig.me/ip

# ä»£ç†ç»„
policy_groups:
- external:
    name: æ‰‹åŠ¨é€‰æ‹©
    type: select
    urls:
    filter: ^(?!.*(é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|åˆ°æœŸ|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|ç¾¤|è´©å–|é€šçŸ¥|å€’å–|å‡|å»¶è¿Ÿ|æ— æ³•ä½¿ç”¨|è½¯ä»¶å†…æ›´æ–°è®¢é˜…|åœ¨å®˜ç½‘æŸ¥çœ‹é—®é¢˜|é˜²æ­¢|å›½å†…|åŠ å…¥)).*
    update_interval: 86400
    icon: https://github.com/Repcz/Repcz.github.io/raw/main/docs/egern/Photo/Egern.png
    hidden: false
- select:
    name: å›½å¤–ç½‘ç«™
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png
    hidden: false
- select:
    name: å›½é™…åª’ä½“
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Apple_Arcade.png
    hidden: false
- select:
    name: ğ’€ğ’ğ’–ğ‘»ğ’–ğ’ƒğ’†
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
    hidden: false
- select:
    name: ğ‘«ğ’Šğ’”ğ’ğ’†ğ’š+
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Disney.png
    hidden: false
- select:
    name: ğ‘ºğ’‘ğ’ğ’•ğ’Šğ’‡ğ’š
    policies:
    - DIRECT
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png
    hidden: false
- select:
    name: ğ‘µğ’†ğ’•ğ’‡ğ’ğ’Šğ’™
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netflix.png
    hidden: false
- select:
    name: ğ‘»ğ’Šğ’Œğ‘»ğ’ğ’Œ
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TikTok.png
    hidden: false
- select:
    name: 'ğ‘´ğ’Šğ’„ğ’“ğ’ğ’”ğ’ğ’‡ğ’• '
    policies:
    - éŸ©å›½èŠ‚ç‚¹
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png
    hidden: false
- select:
    name: ğ‘®ğ’ğ’ğ’ˆğ’ğ’†
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png
    hidden: false
- select:
    name: ğ‘»ğ’†ğ’ğ’†ğ’ˆğ’“ğ’‚ğ’
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Telegram_02.png
    hidden: false
- select:
    name: ğ‘»ğ’˜ğ’Šğ’•ğ’•ğ’†ğ’“ - ğ‘¿
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png
    hidden: false
- select:
    name: ğ‘¨ğ‘°äººå·¥æ™ºèƒ½
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)è§£é”|å®¶å®½|æµåª’ä½“|å¥ˆé£|(\b(NF|GPT)\b)
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png
    hidden: false
- select:
    name: ğ‘®ğ’‚ğ’ğ’† ğŸ®
    policies:
    - éŸ©å›½èŠ‚ç‚¹
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png
    hidden: false
- select:
    name: 'ğ‘¬ğ’ğ’ƒğ’š '
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Emby.png
    hidden: false
- select:
    name: å…œåº•åˆ†æµ
    policies:
    - DIRECT
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - ç‹®åŸèŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png
    hidden: false
- auto_test:
    name: é¦™æ¸¯èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)
    tolerance: 0
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
- auto_test:
    name: å°æ¹¾èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)ğŸ‡¨ğŸ‡³|ğŸ‡¹ğŸ‡¼|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)
    tolerance: 0
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png
- auto_test:
    name: éŸ©å›½èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)ğŸ‡°ğŸ‡·|éŸ©å›½|(\b(KR|Korea|Seoul)\b)
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Korea.png
    hidden: false
- auto_test:
    name: æ—¥æœ¬èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|ä¸œäº¬|(\b(JP|Japan)\b)
    tolerance: 0
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
- auto_test:
    name: ç‹®åŸèŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)
    tolerance: 0
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
- auto_test:
    name: ç¾å›½èŠ‚ç‚¹
    policies:
    - æ‰‹åŠ¨é€‰æ‹©
    flatten: true
    filter: (?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ´›æ‰çŸ¶|åœ£ä½•å¡|(\b(US|United States)\b)
    tolerance: 0
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png
rules:
- rule_set:
    name: å±è”½ç³»ç»Ÿæ›´æ–°âŒ
    match: https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Egern/EgernSoftwareUpdates.yaml
    policy: REJECT
    update_interval: 86400
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Direct.yaml
    policy: DIRECT
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Reject.yaml
    policy: REJECT
- rule_set:
    match: https://raw.githubusercontent.com/Fromboy/QxLoonShadowrocket/refs/heads/Egern/EgernAI.yaml
    policy: ğ‘¨ğ‘°äººå·¥æ™ºèƒ½
    update_interval: 86400
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Github.yaml
    policy: 'ğ‘´ğ’Šğ’„ğ’“ğ’ğ’”ğ’ğ’‡ğ’• '
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/OneDrive.yaml
    policy: 'ğ‘´ğ’Šğ’„ğ’“ğ’ğ’”ğ’ğ’‡ğ’• '
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Microsoft.yaml
    policy: 'ğ‘´ğ’Šğ’„ğ’“ğ’ğ’”ğ’ğ’‡ğ’• '
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/YouTube.yaml
    policy: ğ’€ğ’ğ’–ğ‘»ğ’–ğ’ƒğ’†
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Google.yaml
    policy: ğ‘®ğ’ğ’ğ’ˆğ’ğ’†
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Telegram.yaml
    policy: ğ‘»ğ’†ğ’ğ’†ğ’ˆğ’“ğ’‚ğ’
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Twitter.yaml
    policy: ğ‘»ğ’˜ğ’Šğ’•ğ’•ğ’†ğ’“ - ğ‘¿
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Game.yaml
    policy: ğ‘®ğ’‚ğ’ğ’† ğŸ®
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Emby.yaml
    policy: 'ğ‘¬ğ’ğ’ƒğ’š '
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Bahamut.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Disney.yaml
    policy: ğ‘«ğ’Šğ’”ğ’ğ’†ğ’š+
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/HBO.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Netflix.yaml
    policy: ğ‘µğ’†ğ’•ğ’‡ğ’ğ’Šğ’™
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Spotify.yaml
    policy: ğ‘ºğ’‘ğ’ğ’•ğ’Šğ’‡ğ’š
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/PrimeVideo.yaml
    policy: å›½é™…åª’ä½“
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/TikTok.yaml
    policy: ğ‘»ğ’Šğ’Œğ‘»ğ’ğ’Œ
    disabled: false
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/ProxyGFW.yaml
    policy: å›½å¤–ç½‘ç«™
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/AppleProxy.yaml
    policy: å›½å¤–ç½‘ç«™
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Apple.yaml
    policy: DIRECT
- rule_set:
    match: https://github.com/Repcz/Tool/raw/X/Egern/Rules/Lan.yaml
    policy: DIRECT
- geoip:
    match: CN
    policy: DIRECT
- default:
    policy: å…œåº•åˆ†æµ
mitm:
  enabled: true
modules:
- url: https://github.com/Repcz/Tool/raw/X/Egern/Module/YouTube.yaml
  enabled: false
- name: SubStore
  url: https://raw.githubusercontent.com/sub-store-org/Sub-Store/refs/heads/master/config/Egern.yaml
  enabled: false
